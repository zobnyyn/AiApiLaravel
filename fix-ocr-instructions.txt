#!/bin/bash

echo "=== Инструкции по исправлению проблемы OCR ==="
echo ""
echo "Проблема: Tesseract OCR не найден в Docker контейнере"
echo "Решение: Пересобрать контейнер с обновленным Dockerfile"
echo ""
echo "Выполните следующие команды:"
echo ""
echo "1. Остановите контейнеры:"
echo "   docker-compose down"
echo ""
echo "2. Пересоберите с новыми зависимостями:"
echo "   docker-compose build --no-cache"
echo ""
echo "3. Запустите контейнеры:"
echo "   docker-compose up -d"
echo ""
echo "4. Проверьте установку Tesseract:"
echo "   docker-compose exec app tesseract --version"
echo ""
echo "5. Проверьте логи:"
echo "   docker-compose logs app"
echo ""
echo "=== Альтернативное решение ==="
echo ""
echo "Если Docker пересборка не помогает, можно:"
echo "1. Установить Tesseract в работающий контейнер:"
echo "   docker-compose exec app apt-get update"
echo "   docker-compose exec app apt-get install -y tesseract-ocr tesseract-ocr-eng tesseract-ocr-rus"
echo ""
echo "2. Проверить установку:"
echo "   docker-compose exec app tesseract --version"
echo ""
echo "=== Что было исправлено ==="
echo "✓ Обновлен Dockerfile с корректной установкой tesseract-ocr"
echo "✓ Добавлена поддержка русского языка (tesseract-ocr-rus)"
echo "✓ Улучшен OcrController с лучшей обработкой ошибок"
echo "✓ Исправлены маршруты - OCR маршрут перемещен до catch-all"
echo "✓ Добавлено исключение OCR из CSRF проверки"
echo "✓ Улучшена обработка ошибок в frontend"
echo ""
echo "После выполнения этих шагов функция распознавания текста из изображений должна работать."
